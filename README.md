### 디디하우스 채팅 기능 서비스 (web.ver) : vue3 -> 'nuxt3 버전'

1. **소개**
   - 디디하우스 앱/웹 내 채팅 기능 도입 (1:1) -> 단체 채팅 확장 (비회원 쪽지 문의 추가) -> 기획 변경 (유저 기준으로 채팅방 관리, 비회원 쪽지 x -> 채팅) -> 서버 부하 고려 (웹소켓 연결 재설계)
2. **기간**
   - 2025.03.18 ~ 2025.06.20
3. **개발 과정**
   1. **소켓 연결 파트**
      - 유저의 아이디 구독
        - 각 유저는 자신의 아이디로 구독 경로 접속 (로그인 이후)
        - 타입에 따라 실시간 알림 및 채팅 내역 처리
   2. **채팅 내역 파트**
      - 메시지 type이 ‘TEXT’와 ‘SYSTEM’으로 크게 구분
      - ‘TEXT’ 메시지는 각 메시지마다 unreadCount (읽지 않은 유저 수)가 있음
      - 채팅 전송, 입/퇴장 시 /app 경로 사용
      - **소켓 수신 타입**
        - **CLEAR_ROOM** (채팅방 생성 완료 알림)
        - **CHAT** (채팅 전송 알림)
        - **INFO** (상대가 채팅방에 입장 알림) - 읽음 처리 해야하는 메시지 수 같이 전달
        - **OUT** (상대가 채팅방에 퇴장 알림)
        - **INVITE** (채팅방에 유저 초대 알림)
        - **LEAVE** (유저가 채팅방을 나갔다는 알림) - 읽음 처리 해야하는 메시지 수 같이 전달
        - **DELETE** (채팅 메시지 전체 삭제 알림) - 전체 삭제 한 메시지 id : “삭제된 메시지입니다.” 처리
   3. **채팅 리스트 파트**
      - 각 채팅방에는 유저가 읽지 않은 채팅 수가 실시간 업데이트 및 마지막 메시지 업데이트
      - ‘CHATLIST’로 실시간 정보 확인 및 업데이트
   4. **비회원 매물 문의 파트**
      - 비회원은 일회성 매물 문의 메시지 전송
      - 비회원 채팅방은 회원만 조회 가능 (비회원 전화번호로 채팅방 분류)
4. **API 기능 명세**
   - <a href="https://www.notion.so/API-chat-erd-1e5caaf36f6f80218fe2f4eb729f0a44" style="color: black;">API 기능 명세 정리 바로가기</a>
